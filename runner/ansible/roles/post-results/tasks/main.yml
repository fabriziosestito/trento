---

- name: set_global_results {{ test_id }}
  set_fact:
    results: |
      {{ (results | default({})) | combine(
        {
          'results': {
            item: {
              'checks': {
                test_id: {
                  'hosts': {
                    inventory_hostname: {
                      'result': status
                    }
                  }
                }
              }
            }
          }
        }, recursive=True)
      }}
  delegate_to: localhost
  with_items: "{{ group_names }}"
